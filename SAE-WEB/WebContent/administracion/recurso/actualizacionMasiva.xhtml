<ui:composition template="/templates/layout.xhtml"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:p="http://primefaces.org/ui"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html">
	<ui:param name="nombre_pagina" value="#{sessionMBean.textos['actualizacion_masiva_datos']}" />
	<ui:define name="cuerpo">
		<f:view beforePhase="#{recursoMBean.beforePhaseActualizar}" >
				<h:form id="form" rendered="#{sessionMBean.agendaMarcada != null}">
						  <p:outputPanel id="panelForm">
					        <p:outputPanel styleClass="form-required">
					          <h:outputText value="#{sessionMBean.textos['los_campos_indicados_con_asterisco_son_obligatorios']}" />
					        </p:outputPanel>
							
							<fieldset>
								<legend>
									<h:outputText value="#{sessionMBean.textos['configuracion_para_intranet']}" />
								</legend>
								<p:outputPanel styleClass="form-horizontal">
									<p:outputPanel styleClass="form-group">
										<p:outputLabel value="#{sessionMBean.textos['dias_de_inicio_de_la_ventana_de_intranet']}" styleClass="col-sm-3 control-label label" for="diasIVIntranet" />
										<p:outputPanel styleClass="col-sm-9">
											<h:inputText id="diasIVIntranet" value="#{recursoSessionMBean.diasInicioVentanaIntranet}" 
											  maxlength="5" immediate="true" converter="integerConverter" styleClass="form-control textoCorto" />
											<h:outputText styleClass="input-msg" value="#{sessionMBean.textos['dias_de_inicio_de_la_ventana_de_intranet_descripcion']}" />
											<p:message for="diasIVIntranet" errorClass="mensajeError"
												styleClass="anchoMsgErr" infoClass="mensajeInfo"/>
										</p:outputPanel>
									</p:outputPanel>
									<p:outputPanel styleClass="form-group">
										<p:outputLabel value="#{sessionMBean.textos['dias_de_la_ventana_de_intranet']}" styleClass="col-sm-3 control-label label formularioCampoRequerido"
											for="DiasVIntranet" />
										<p:outputPanel styleClass="col-sm-9">
											<h:inputText id="DiasVIntranet" value="#{recursoSessionMBean.diasVentanaIntranet}" maxlength="5" immediate="true" converter="integerConverter"
												styleClass="form-control textoCorto" />
											<h:outputText styleClass="input-msg" value="#{sessionMBean.textos['cantidad_de_dias_siguientes_disponibles']}" />
											<p:message for="DiasVIntranet" errorClass="mensajeError"
												styleClass="anchoMsgErr" infoClass="mensajeInfo"  />
										</p:outputPanel>
									</p:outputPanel>
								</p:outputPanel>
							</fieldset>
							<fieldset>
								<legend>
									<h:outputText value="#{sessionMBean.textos['configuracion_para_internet']}" />
								</legend>
								<p:outputPanel styleClass="form-horizontal">
									<p:outputPanel styleClass="form-group">
										<p:outputLabel value="#{sessionMBean.textos['dias_de_inicio_de_la_ventana_de_internet']}" styleClass="col-sm-3 control-label label" for="DiasInicioVInternet" />
										<p:outputPanel styleClass="col-sm-9">
											<h:inputText id="DiasInicioVInternet" value="#{recursoSessionMBean.diasInicioVentanaInternet}" maxlength="5" immediate="true" converter="integerConverter"
												styleClass="form-control textoCorto" />
											<h:outputText styleClass="input-msg" value="#{sessionMBean.textos['dias_de_inicio_de_la_ventana_de_internet_descripcion']}" />
											<p:message for="DiasInicioVInternet" ajaxRendered="true" errorClass="mensajeError" infoClass="mensajeInfo"></p:message>
										</p:outputPanel>
									</p:outputPanel>
									<p:outputPanel styleClass="form-group">
										<p:outputLabel value="#{sessionMBean.textos['dias_de_la_ventana_de_internet']}" styleClass="col-sm-3 control-label label formularioCampoRequerido"
											for="DiasVInternet" />
										<p:outputPanel styleClass="col-sm-9">
											<h:inputText id="DiasVInternet" value="#{recursoSessionMBean.diasVentanaInternet}" maxlength="5" immediate="true" converter="integerConverter"
												styleClass="form-control textoCorto" />
											<h:outputText styleClass="input-msg" value="#{sessionMBean.textos['cantidad_de_dias_siguientes_disponibles']}" />
											<p:message for="DiasVInternet" errorClass="mensajeError"
												styleClass="anchoMsgErr" infoClass="mensajeInfo"  />
										</p:outputPanel>
									</p:outputPanel>
								</p:outputPanel>
							</fieldset>
							
							<p:outputPanel id="recursos">
								<p:dataTable id="tablaRecursos" binding="#{recursoMBean.recursosDataTableActualizar}" value="#{recursoSessionMBean.recursos}" var="row" rowKey="#{row.data.id}" 
								  caption="#{sessionMBean.textos['listado_de_recursos']}" emptyMessage="#{sessionMBean.textos['no_hay_datos_para_mostrar']}">
									  <f:facet name="header">
										<h:outputText value="Recursos"></h:outputText>
									  </f:facet>
			
									 <p:column>
										<f:facet name="header">
											<h:selectBooleanCheckbox id="todos" value="#{recursoMBean.seleccionarTodos}" title="#{sessionMBean.textos['todos_los_recursos']}">
												<p:ajax update="form:recursos" listener="#{recursoMBean.seleccionarTodosRecursos}" process="@this" />
											</h:selectBooleanCheckbox>
											<p:outputLabel value="#{sessionMBean.textos['todos_los_recursos']}" for="todos" styleClass="ui-helper-hidden-accessible" />
										</f:facet>
										<h:selectBooleanCheckbox value="#{row.data.seleccionado}" id="idRecurso">
			                  				<p:ajax update="form:recursos" listener="#{recursoMBean.seleccionarUno}" process="@this" />
			                			</h:selectBooleanCheckbox>
										<p:outputLabel value=" #{row.data.id}" for="idRecurso" styleClass="ui-helper-hidden-accessible">
										</p:outputLabel>
									</p:column>
			                          <p:column>
										<f:facet name="header">
			               					<h:outputText value="#{sessionMBean.textos['identificador']}" />
										</f:facet>
										<h:outputText value="#{row.data.id}"></h:outputText>
									  </p:column> 
									  <p:column>
										<f:facet name="header">
			               					<h:outputText value="#{sessionMBean.textos['nombre']}" />
										</f:facet>
										<h:outputText value="#{row.data.nombre}"></h:outputText>
									  </p:column>
									  <p:column>
										<f:facet name="header">
			                 					<h:outputText value="#{sessionMBean.textos['descripcion']}" />
										</f:facet>
										<h:outputText value="#{row.data.descripcion}" escape="false"></h:outputText>
									  </p:column>
			
								</p:dataTable>
						  </p:outputPanel>
			       
			
			
			        
							<ul class="form-action-buttons">
								<li class="action-buttons-primary">
									<ul>
										<li>
										  <p:commandButton value="#{sessionMBean.textos['actualizar_datos']}" 
										  actionListener="#{recursoMBean.actualizarRecursos}"
										  onstart="PF('buiEjecutar').show();" 
                                          oncomplete="PF('buiEjecutar').hide();"	
										  styleClass="btn-lg btn-primario" update="form:panelForm" />
									  </li>
									</ul>
								</li>
								<li class="action-buttons-second"></li>
							</ul>
							
							<p:blockUI id="buiEjecutar" widgetVar="buiEjecutar" block="panelForm" >
                            	Actualizando recursos, por favor espere...<br />
                            	<p:graphicImage library="images" name="loading.gif"/>
                        	</p:blockUI>
			      </p:outputPanel>
			</h:form>
		</f:view>
	</ui:define>
</ui:composition>