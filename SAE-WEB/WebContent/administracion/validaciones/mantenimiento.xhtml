<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html">

<ui:composition template="/templates/layout.xhtml">
	<ui:param name="nombre_pagina" value="#{sessionMBean.pantallaTitulo}" />
	<ui:define name="cuerpo">
		<f:view beforePhase="#{validacionMantenimientoMBean.beforePhase}"
			beforePhaseListener="#{validacionMantenimientoMBean.beforePhase}">

			<h:form id="form">
				<p:outputPanel styleClass="botonesDerecha">
					<p:commandButton id="agregarValidacion" value="Crear Validación"
						styleClass="btn btn-secundario"
						actionListener="#{validacionMantenimientoMBean.crear}"
						update="form" />
				</p:outputPanel>


				<p:dataTable value="#{validacionMantenimientoMBean.validaciones}"
					var="row"
					binding="#{validacionMantenimientoMBean.validacionesTable}"
					id="tablaValidaciones" rows="5" paginator="true"
					paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}">

					<f:facet name="header">
						<h:outputText value="Validaciones" />
					</f:facet>

					<p:column>
						<f:facet name="header">
							<h:outputText value="Nombre"></h:outputText>
						</f:facet>
						<h:outputText value="#{row.nombre}"></h:outputText>
						<p:tooltip value="#{row.descripcion}"></p:tooltip>
					</p:column>

					<p:column>
						<f:facet name="header">
							<h:outputText value="Servicio"></h:outputText>
						</f:facet>
						<h:outputText value="#{row.servicio}"></h:outputText>
					</p:column>

					<p:column>
						<f:facet name="header">
							<h:outputText value="Host"></h:outputText>
						</f:facet>
						<h:outputText value="#{row.host}"></h:outputText>
					</p:column>

					<p:column>
						<p:commandButton id="modificarLink" update="form:panelValidacion"
							actionListener="#{validacionMantenimientoMBean.editar}"
							icon="ui-icon-pencil">

							<p:tooltip value="Editar la validacion" />
						</p:commandButton>



						<p:commandButton id="elimLink"
							update="tablaValidaciones, panelValidacion"
							actionListener="#{validacionMantenimientoMBean.eliminarValidacion}"
							icon="ui-icon-trash">

						</p:commandButton>
						<p:tooltip for="elimLink"
							value="#{sessionMBean.textos['eliminar']}" />
					</p:column>


				</p:dataTable>

				<p:spacer height="5px"></p:spacer>

				<p:outputPanel id="panelValidacion"
					rendered="#{validacionMantenimientoSessionMBean.modoEdicion || validacionMantenimientoSessionMBean.modoCreacion}">
					<fieldset>
						<legend>
							<h:outputText value="Creando validación"
								rendered="#{validacionMantenimientoSessionMBean.modoCreacion}" />
							<h:outputText value="Editando validación"
								rendered="#{validacionMantenimientoSessionMBean.modoEdicion}" />
						</legend>

						<p:outputPanel styleClass="form-horizontal">

							<p:outputPanel styleClass="form-group">
								<h:outputLabel value="Nombre:"
									styleClass="col-sm-3 control-label label" for="nombre" />
								<p:outputPanel styleClass="col-sm-9">
									<h:inputText
										value="#{validacionMantenimientoSessionMBean.validacion.nombre}"
										size="75" id="nombre" />
								</p:outputPanel>
							</p:outputPanel>

							<p:outputPanel styleClass="form-group">
								<h:outputLabel value="Descripción:"
									styleClass="col-sm-3 control-label label" for="descripcion" />


								<p:outputPanel styleClass="col-sm-9">
									<h:inputTextarea
										value="#{validacionMantenimientoSessionMBean.validacion.descripcion}"
										cols="71" rows="5" id="descripcion" />
								</p:outputPanel>
							</p:outputPanel>

							<p:outputPanel styleClass="form-group">
								<h:outputLabel value="Servicio:"
									styleClass="col-sm-3 control-label label" for="servicio" />
								<p:outputPanel styleClass="col-sm-9">
									<h:inputText
									value="#{validacionMantenimientoSessionMBean.validacion.servicio}"
									size="75" id="servicio" />
								</p:outputPanel>
							</p:outputPanel>
							
							<p:outputPanel styleClass="form-group">
								<h:outputText value="Host:" />
								<h:inputText
									value="#{validacionMantenimientoSessionMBean.validacion.host}"
									size="75" />
								<h:outputLabel value="Host:" 
									styleClass="col-sm-3 control-label label" for="host" />
								<p:outputPanel styleClass="col-sm-9">
									<h:inputText
									value="#{validacionMantenimientoSessionMBean.validacion.host}"
									size="75" id="host" />
								</p:outputPanel>
							</p:outputPanel>
							
							<p:outputPanel styleClass="form-group">
								<h:outputText value="Parámetros:" />
								<h:outputLabel value="Parámetros:"
									styleClass="col-sm-3 control-label label" for="parametro" />
								<p:dataTable
									value="#{validacionMantenimientoSessionMBean.validacion.parametrosValidacion}"
									var="row" columns="4"
									binding="#{validacionMantenimientoMBean.parametrosTable}"
									id="tablaParametros" rows="4" width="404px">

									<p:column style="text-align:left;" width="234px">
										<f:facet name="header">
											<h:outputText value="Nombre"></h:outputText>
										</f:facet>
										<p:inplaceInput value="#{row.nombre}" inputWidth="150px"></p:inplaceInput>
									</p:column>

									<p:column style="text-align:left;" width="120px">
										<f:facet name="header">
											<h:outputText value="Tipo"></h:outputText>
										</f:facet>

										<h:selectOneMenu value="#{row.tipo}" style="width: 90px">
											<f:selectItems
												value="#{validacionMantenimientoMBean.tiposDeDato}" />
										</h:selectOneMenu>
									</p:column>

									<p:column style="text-align:left;" width="30px">
										<f:facet name="header">
											<h:outputText value="Largo"></h:outputText>
										</f:facet>
										<p:inplaceInput value="#{row.largo}" inputWidth="30px">
										</p:inplaceInput>
									</p:column>

									<p:column style="text-align:center;" width="20px">
										<p:commandLink reRender="tablaParametros"
											actionListener="#{validacionMantenimientoMBean.eliminarParametro}">
											<h:graphicImage
												value="#{saeProperties['ui.resource.base.url']}/recursos/images/delete2.gif"
												style="border:0" height="16" width="16" />
											<p:tooltip value="Elimina el parámetro" />
										</p:commandLink>
									</p:column>

									<f:facet name="footer">
										<h:panelGroup>
											<p:commandLink reRender="tablaParametros"
												actionListener="#{validacionMantenimientoMBean.crearParametro}">
												<h:graphicImage
													value="#{saeProperties['ui.resource.base.url']}/recursos/images/create_doc.gif"
													style="border:0" height="16" width="16" />
												<p:tooltip value="Agrega un nuevo parámetro" />
											</p:commandLink>
										</h:panelGroup>
									</f:facet>
								</p:dataTable>
								
								<p:outputPanel styleClass="col-sm-9">
									<h:inputText
									value="#{validacionMantenimientoSessionMBean.validacion.servicio}"
									size="75" id="servicio" />
								</p:outputPanel>
							</p:outputPanel>

						</p:outputPanel>

					</fieldset>
				</p:outputPanel>
				<h:panelGrid columns="1">




					<p:spacer height="5px"></p:spacer>

					<h:panelGroup id="panelValidacion">
						<p:panel
							rendered="#{validacionMantenimientoSessionMBean.modoEdicion || validacionMantenimientoSessionMBean.modoCreacion}">
							<f:facet name="header">
								<h:panelGroup>
									<h:outputText value="Creando validación"
										rendered="#{validacionMantenimientoSessionMBean.modoCreacion}" />
									<h:outputText value="Editando validación"
										rendered="#{validacionMantenimientoSessionMBean.modoEdicion}" />
								</h:panelGroup>
							</f:facet>

							<h:panelGrid columns="2" columnClasses="derecha, izquierda">

								<h:outputText value="Nombre:" />
								<h:inputText
									value="#{validacionMantenimientoSessionMBean.validacion.nombre}"
									size="75" />
								<h:outputText value="Descripción:" />
								<h:inputTextarea
									value="#{validacionMantenimientoSessionMBean.validacion.descripcion}"
									cols="71" rows="5">
								</h:inputTextarea>
								<h:outputText value="Servicio:" />
								<h:inputText
									value="#{validacionMantenimientoSessionMBean.validacion.servicio}"
									size="75" />
								<h:outputText value="Host:" />
								<h:inputText
									value="#{validacionMantenimientoSessionMBean.validacion.host}"
									size="75" />

								<h:outputText value="Parámetros:" />

								<p:dataTable
									value="#{validacionMantenimientoSessionMBean.validacion.parametrosValidacion}"
									var="row" columns="4"
									binding="#{validacionMantenimientoMBean.parametrosTable}"
									id="tablaParametros" rows="4" width="404px">

									<p:column style="text-align:left;" width="234px">
										<f:facet name="header">
											<h:outputText value="Nombre"></h:outputText>
										</f:facet>
										<p:inplaceInput value="#{row.nombre}" inputWidth="150px"></p:inplaceInput>
									</p:column>

									<p:column style="text-align:left;" width="120px">
										<f:facet name="header">
											<h:outputText value="Tipo"></h:outputText>
										</f:facet>

										<h:selectOneMenu value="#{row.tipo}" style="width: 90px">
											<f:selectItems
												value="#{validacionMantenimientoMBean.tiposDeDato}" />
										</h:selectOneMenu>
									</p:column>

									<p:column style="text-align:left;" width="30px">
										<f:facet name="header">
											<h:outputText value="Largo"></h:outputText>
										</f:facet>
										<p:inplaceInput value="#{row.largo}" inputWidth="30px">
										</p:inplaceInput>
									</p:column>

									<p:column style="text-align:center;" width="20px">
										<p:commandLink reRender="tablaParametros"
											actionListener="#{validacionMantenimientoMBean.eliminarParametro}">
											<h:graphicImage
												value="#{saeProperties['ui.resource.base.url']}/recursos/images/delete2.gif"
												style="border:0" height="16" width="16" />
											<p:tooltip value="Elimina el parámetro" />
										</p:commandLink>
									</p:column>

									<f:facet name="footer">
										<h:panelGroup>
											<p:commandLink reRender="tablaParametros"
												actionListener="#{validacionMantenimientoMBean.crearParametro}">
												<h:graphicImage
													value="#{saeProperties['ui.resource.base.url']}/recursos/images/create_doc.gif"
													style="border:0" height="16" width="16" />
												<p:tooltip value="Agrega un nuevo parámetro" />
											</p:commandLink>
										</h:panelGroup>
									</f:facet>
								</p:dataTable>

								<p:spacer>
								</p:spacer>

								<h:panelGroup>
									<p:commandButton value="Guardar"
										actionListener="#{validacionMantenimientoMBean.guardarEdicion}"
										reRender="tablaValidaciones, panelValidacion"
										rendered="#{validacionMantenimientoSessionMBean.modoEdicion}">
									</p:commandButton>
									<p:commandButton value="Cancelar"
										actionListener="#{validacionMantenimientoMBean.cancelarEdicion}"
										immediate="true" reRender="tablaValidaciones, panelValidacion"
										rendered="#{validacionMantenimientoSessionMBean.modoEdicion}">
									</p:commandButton>

									<p:commandButton value="Guardar"
										actionListener="#{validacionMantenimientoMBean.guardarCreacion}"
										reRender="pantalla,tablaValidaciones"
										rendered="#{validacionMantenimientoSessionMBean.modoCreacion}">
									</p:commandButton>
									<p:commandButton value="Cancelar"
										actionListener="#{validacionMantenimientoMBean.cancelarCreacion}"
										immediate="true" reRender="pantalla"
										rendered="#{validacionMantenimientoSessionMBean.modoCreacion}">
									</p:commandButton>
								</h:panelGroup>
							</h:panelGrid>

						</p:panel>
					</h:panelGroup>
				</h:panelGrid>
			</h:form>
		</f:view>
	</ui:define>
</ui:composition>
</html>